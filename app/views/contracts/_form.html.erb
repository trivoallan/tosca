<%= error_messages_for 'contrat' %>

<table class="topbox">
  <tr><td>
    <table class="form">
      <tr>
        <th><label for="contrat_client_id"><%=_('Customer')%></label></th>
        <td><%= select(:contrat, :client_id, @clients) %></td>
      </tr><tr>
        <th><label for="contrat_chrono"><%= _("Contrat|Chrono") %></label></th>
        <td><%= text_field :contrat, :chrono %></td>
      </tr><tr>
        <th><label for="contrat_mailinglist"><%=_("Mailing list")%></label></th>
        <td><%= text_field 'contrat', 'mailinglist'  %></td>
      </tr><tr>
        <th><label for="contrat_ouverture"><%= _('Start') %></label></th>
        <td><%= date_select :contrat, :ouverture %></td>
      </tr><tr>
        <th><label for="contrat_cloture"><%=_('End')%></label></th>
        <td><%= date_select :contrat, :cloture %></td>
      </tr><tr>
        <th><label for="contrat_veille_technologique"><%= _("Technological survey") %></label></th>
        <td><%= check_box :contrat, :veille_technologique %></td>
      </tr><tr>
        <th><label for="contrat_newsletter"><%= _("Newsletter") %></label></th>
        <td><%= check_box :contrat, :newsletter  %></td>
      </tr><tr>
        <th><label for="contrat_name"><%= _("Domain") %></label></th>
        <td><%= text_field :contrat, :name %></td>
      </tr><tr>
        <th><label><%=_('Commitments')%> <%= link_to_new_engagement %></label></th>
        <td><%= show_form_engagements(@contrat.engagements, @engagements, 'contrat[engagement_ids]') %></td>
      </tr>
    </table>
  </td>
  <td>
    <table class="form">
     <tr>
      <th><label><%= _("Type") %></label></th>
       <td><% Contrat::Rules.each do |r| %>
               <%= radio_button(:contrat, :rule_type, r) %>
               <%= _(r) %> <%= link_to_new_rule(r) %>
           <% end %></td>
     </tr><tr>
       <th><label for="contrat_rule_id"><%= _('Ruled by') %></label></th>
       <td><div id="contrat_rules">
          <%= render :partial => 'rules' %>
	   </div></td>
     </tr><tr>
     <% options = {:size => 1, :style => 'text-align: center;' } %>
       <th><label for="contrat_heure_ouverture"><%= _("Schedules") %></label></th>
       <td><%= text_field :contrat, :heure_ouverture, options  %><%= _("h") %> -
           <%= text_field :contrat, :heure_fermeture, options  %><%= _("h") %></td>
     </tr><tr>
       <td colspan="2">
       <fieldset>
        <legend><%=_('Engineers assigned to this contract')%></legend>
        <%= hbtm_check_box(@contrat.engineer_users, @ingenieurs,
                         'contrat[engineer_user_ids]', :size => 3) %>
       </fieldset>
      </td>
     </tr>
     <tr>
       <td colspan="2">
       <fieldset>
        <legend><%=_('Teams managing this contract')%></legend>
        <%= hbtm_check_box(@contract_team, @teams, 
                         'contrat[team_ids]', :size => 3) %>
       </fieldset>
      </td>
     </tr>
    </table>
  </td></tr>
</table>
